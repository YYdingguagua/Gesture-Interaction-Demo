<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="zh-CN"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;三星堆 3D 全息粒子科普&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- MediaPipe dependencies --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"&gt;&lt;/script&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { margin: 0; overflow: hidden; background: #000; font-family: "PingFang SC", "Microsoft YaHei", sans-serif; color: white; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#video-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -2; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#input-video { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: -1; pointer-events: none; opacity: 1; }</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Music bars animation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.music-bars { display: flex; align-items: flex-end; gap: 2px; height: 16px; width: 24px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bar { background: white; width: 4px; border-radius: 1px; animation: scale-up 0.5s ease-in-out infinite alternate; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bar:nth-child(1) { animation-delay: 0.1s; height: 40%; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bar:nth-child(2) { animation-delay: 0.3s; height: 100%; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bar:nth-child(3) { animation-delay: 0.2s; height: 60%; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes scale-up { from { height: 20%; } to { height: 100%; } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.paused .bar { animation-play-state: paused; height: 30% !important; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* POI styles */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-container { position: absolute; pointer-events: none; transform: translate(0, -50%); display: flex; align-items: center; z-index: 10; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-dot {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 14px; height: 14px; background: white; border-radius: 50%;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative; cursor: pointer; pointer-events: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 10px white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-dot::after {</p>
<p class="p1"><span class="Apple-converted-space">            </span>content: ''; position: absolute; top: -10px; left: -10px; right: -10px; bottom: -10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid white; border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: ripple 2s infinite; opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes ripple {</p>
<p class="p1"><span class="Apple-converted-space">            </span>0% { transform: scale(0.5); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>100% { transform: scale(1.5); opacity: 0; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-card {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: 20px; padding: 12px 16px; min-width: 140px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-left: 3px solid white; border-top: 1px solid rgba(255,255,255,0.2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0.7; transform: translateX(-10px); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-container:hover .poi-card { opacity: 1; transform: translateX(0); background: rgba(255, 255, 255, 0.2); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-card-title { font-size: 14px; font-weight: bold; margin-bottom: 4px; display: block; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.poi-card-text { font-size: 11px; color: rgba(255,255,255,0.7); line-height: 1.4; display: block; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>#loading-indicator { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; z-index: 50; text-shadow: 0 0 10px rgba(255,255,255,0.5); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="video-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;video id="input-video" playsinline&gt;&lt;/video&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Header Section: Left Aligned Title and Info --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="left-header" class="fixed top-12 left-10 z-20 flex flex-col items-start gap-2 max-w-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 id="artifact-title" class="text-5xl font-bold tracking-tight text-white uppercase drop-shadow-2xl"&gt;加载中...&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="info-panel" class="transition-opacity duration-700"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p id="artifact-desc" class="text-sm leading-relaxed text-white/80 font-light drop-shadow-md"&gt;正在初始化全息投影...&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Right Controls: Audio --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="right-controls" class="fixed top-12 right-10 z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="music-btn" class="flex items-center cursor-pointer group pr-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="music-bars paused" id="music-bars"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bar"&gt;&lt;/div&gt;&lt;div class="bar"&gt;&lt;/div&gt;&lt;div class="bar"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="poi-overlay" class="fixed top-0 left-0 w-full h-full pointer-events-none overflow-hidden"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="loading-indicator" class="text-xs tracking-[0.5em] uppercase animate-pulse"&gt;正在重构粒子场...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="overlay"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="three-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%;"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Bottom Controls --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="fixed bottom-0 left-0 w-full p-8 ui-panel flex flex-col items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="flex items-center gap-6 w-full max-w-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="text-white text-[9px] uppercase tracking-[0.3em]"&gt;全息场强&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="range" id="opacity-slider" min="0" max="100" value="100" class="flex-grow h-[1px] bg-white/20 appearance-none cursor-pointer accent-white"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span id="opacity-val" class="text-white font-mono text-[10px] w-10 text-right"&gt;100%&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="mt-4 text-[9px] text-white/30 tracking-[0.2em] uppercase flex gap-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;捏合: 旋转控制&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;双手: 调整缩放&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;挥手: 切换文物&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="importmap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>{</p>
<p class="p1"><span class="Apple-converted-space">            </span>"imports": {</p>
<p class="p1"><span class="Apple-converted-space">                </span>"three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",</p>
<p class="p1"><span class="Apple-converted-space">                </span>"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="module"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>import * as THREE from 'three';</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let scene, camera, renderer, particleSystem, pointsMaterial;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let clock = new THREE.Clock();</p>
<p class="p1"><span class="Apple-converted-space">        </span>let lastScaleDist = null, lastRotatePos = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentIndex = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let isSwitching = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let swipeHistory = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let poiData = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 使用 jsDelivr CDN 地址，解决 GitHub Raw 的 CORS 跨域限制问题</p>
<p class="p1"><span class="Apple-converted-space">        </span>const BASE_URL = 'https://cdn.jsdelivr.net/gh/YYdingguagua/Gesture-Interaction-Demo@main/';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const bgMusic = new Audio(BASE_URL + '%E4%B8%89%E6%98%9F%E5%A0%86%E9%9F%B3%E4%B9%902.mp3');</p>
<p class="p1"><span class="Apple-converted-space">        </span>bgMusic.loop = true;</p>
<p class="p1"><span class="Apple-converted-space">        </span>bgMusic.crossOrigin = "anonymous"; // 确保音频也支持跨域</p>
<p class="p1"><span class="Apple-converted-space">        </span>const musicBars = document.getElementById('music-bars');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function toggleMusic() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (bgMusic.paused) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>bgMusic.play().catch(e =&gt; console.log("User interaction required for audio"));</p>
<p class="p1"><span class="Apple-converted-space">                </span>musicBars.classList.remove('paused');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>bgMusic.pause();</p>
<p class="p1"><span class="Apple-converted-space">                </span>musicBars.classList.add('paused');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('music-btn').addEventListener('click', toggleMusic);</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.addEventListener('click', () =&gt; { if (bgMusic.paused) toggleMusic(); }, { once: true });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const artifacts = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "青铜酒尊",<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>url: BASE_URL + 'jiubei.glb',</p>
<p class="p1"><span class="Apple-converted-space">                </span>desc: "酒器作为祭祀核心，其流线型的粒子分布映射了古蜀人的精神世界。此尊器型宏大，纹饰诡谲，尽显神权之庄严。",</p>
<p class="p1"><span class="Apple-converted-space">                </span>pois: [</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{ pos: new THREE.Vector3(0, 0.45, 0), title: "口沿部", text: "装饰有精细的云雷纹饰" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{ pos: new THREE.Vector3(0.35, -0.3, 0), title: "饕餮纹", text: "象征神权与威严的神秘图腾" }</p>
<p class="p1"><span class="Apple-converted-space">                </span>]</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "黄金面具",</p>
<p class="p1"><span class="Apple-converted-space">                </span>url: BASE_URL + 'mianju.glb',</p>
<p class="p1"><span class="Apple-converted-space">                </span>desc: "极其轻薄且平整，展现了古蜀人对黄金的纯熟加工能力。它是神灵与人间权力的物理交接点。",</p>
<p class="p1"><span class="Apple-converted-space">                </span>pois: [</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{ pos: new THREE.Vector3(0.4, 0.2, 0.1), title: "纵目", text: "典型的古蜀神灵造型特征" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{ pos: new THREE.Vector3(0, -0.4, 0.2), title: "金箔材质", text: "厚度均匀，体现精湛锻打工艺" }</p>
<p class="p1"><span class="Apple-converted-space">                </span>]</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function initThree() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>scene = new THREE.Scene();</p>
<p class="p1"><span class="Apple-converted-space">            </span>camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</p>
<p class="p1"><span class="Apple-converted-space">            </span>camera.position.set(0, 0, 5);</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderer.setSize(window.innerWidth, window.innerHeight);</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderer.setPixelRatio(window.devicePixelRatio);</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('three-container').appendChild(renderer.domElement);</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadParticleModel(artifacts[currentIndex]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>animate();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function loadParticleModel(data) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const loading = document.getElementById('loading-indicator');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const infoPanel = document.getElementById('info-panel');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const poiOverlay = document.getElementById('poi-overlay');</p>
<p class="p1"><span class="Apple-converted-space">            </span>loading.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">            </span>infoPanel.style.opacity = '0';</p>
<p class="p1"><span class="Apple-converted-space">            </span>poiOverlay.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>poiData = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (particleSystem) scene.remove(particleSystem);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const loader = new GLTFLoader();</p>
<p class="p1"><span class="Apple-converted-space">            </span>// 明确指定使用匿名跨域模式</p>
<p class="p1"><span class="Apple-converted-space">            </span>loader.setCrossOrigin('anonymous');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>loader.load(data.url, (gltf) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const positions = [];</p>
<p class="p1"><span class="Apple-converted-space">                </span>gltf.scene.traverse((child) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (child.isMesh) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const posAttr = child.geometry.getAttribute('position');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>for (let i = 0; i &lt; posAttr.count; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>positions.push(posAttr.getX(i), posAttr.getY(i), posAttr.getZ(i));</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>const pointsGeo = new THREE.BufferGeometry();</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointsGeo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointsMaterial = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.015, transparent: true, opacity: 0.5, blending: THREE.AdditiveBlending, depthWrite: false });</p>
<p class="p1"><span class="Apple-converted-space">                </span>particleSystem = new THREE.Points(pointsGeo, pointsMaterial);</p>
<p class="p1"><span class="Apple-converted-space">                </span>particleSystem.rotation.x = Math.PI / 2;</p>
<p class="p1"><span class="Apple-converted-space">                </span>particleSystem.scale.set(1.5, 1.5, 1.5);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const box = new THREE.Box3().setFromObject(particleSystem);</p>
<p class="p1"><span class="Apple-converted-space">                </span>particleSystem.position.sub(box.getCenter(new THREE.Vector3()));</p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.add(particleSystem);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>data.pois.forEach(p =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const container = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>container.className = 'poi-container';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>container.innerHTML = `&lt;div class="poi-dot"&gt;&lt;/div&gt;&lt;div class="poi-card"&gt;&lt;span class="poi-card-title"&gt;${p.title}&lt;/span&gt;&lt;span class="poi-card-text"&gt;${p.text}&lt;/span&gt;&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>poiOverlay.appendChild(container);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>poiData.push({ element: container, pos: p.pos.clone() });</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('artifact-title').innerText = data.title;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('artifact-desc').innerText = data.desc;</p>
<p class="p1"><span class="Apple-converted-space">                </span>infoPanel.style.opacity = '1';</p>
<p class="p1"><span class="Apple-converted-space">                </span>loading.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, undefined, (error) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Error loading model:", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>loading.innerText = "资源加载失败";</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function animate() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>requestAnimationFrame(animate);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (particleSystem) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const elapsed = clock.getElapsedTime();</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointsMaterial.opacity = 0.3 + Math.sin(elapsed * 2) * 0.15;</p>
<p class="p1"><span class="Apple-converted-space">                </span>particleSystem.rotation.z += 0.002;</p>
<p class="p1"><span class="Apple-converted-space">                </span>poiData.forEach(poi =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const worldPos = poi.pos.clone().applyMatrix4(particleSystem.matrixWorld);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const screenPos = worldPos.project(camera);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>poi.element.style.left = `${(screenPos.x * 0.5 + 0.5) * window.innerWidth}px`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>poi.element.style.top = `${(screenPos.y * -0.5 + 0.5) * window.innerHeight}px`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>poi.element.style.display = screenPos.z &gt; 1 ? 'none' : 'flex';</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderer.render(scene, camera);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const hands = new window.Hands({ locateFile: (file) =&gt; `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}` });</p>
<p class="p1"><span class="Apple-converted-space">        </span>hands.setOptions({ maxNumHands: 2, modelComplexity: 1, minDetectionConfidence: 0.7, minTrackingConfidence: 0.7 });</p>
<p class="p1"><span class="Apple-converted-space">        </span>hands.onResults(results =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!results.multiHandLandmarks || results.multiHandLandmarks.length === 0 || !particleSystem) return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const landmarks = results.multiHandLandmarks;</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (landmarks.length === 2) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const dist = Math.sqrt(Math.pow(landmarks[0][0].x-landmarks[1][0].x, 2) + Math.pow(landmarks[0][0].y-landmarks[1][0].y, 2));</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (lastScaleDist) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const s = Math.max(0.3, Math.min(6, particleSystem.scale.x + (dist - lastScaleDist) * 3));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>particleSystem.scale.set(s, s, s);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>lastScaleDist = dist;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const hand = landmarks[0];</p>
<p class="p1"><span class="Apple-converted-space">                </span>const pinch = Math.sqrt(Math.pow(hand[4].x-hand[8].x, 2) + Math.pow(hand[4].y-hand[8].y, 2)) &lt; 0.07;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (pinch) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (lastRotatePos) particleSystem.rotation.z -= (hand[8].x - lastRotatePos) * 8;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>lastRotatePos = hand[8].x;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>lastRotatePos = null;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const now = Date.now();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>swipeHistory.push({ x: hand[0].x, t: now });</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (swipeHistory.length &gt; 5) swipeHistory.shift();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (swipeHistory.length &gt;= 2 &amp;&amp; !isSwitching) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const dx = swipeHistory[swipeHistory.length-1].x - swipeHistory[0].x;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (Math.abs(dx) &gt; 0.3) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>isSwitching = true;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>currentIndex = (currentIndex + 1) % artifacts.length;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>loadParticleModel(artifacts[currentIndex]);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setTimeout(() =&gt; isSwitching = false, 1500);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const videoElement = document.getElementById('input-video');</p>
<p class="p1"><span class="Apple-converted-space">        </span>new window.Camera(videoElement, { onFrame: async () =&gt; { await hands.send({image: videoElement}); }, width: 1280, height: 720 }).start();</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('opacity-slider').oninput = (e) =&gt; document.getElementById('overlay').style.opacity = e.target.value / 100;</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.onload = initThree;</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.onresize = () =&gt; { camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); };</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
